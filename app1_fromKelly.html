<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="initial-scale=1.0">
	<meta charset="utf-8">
	<title>Spur of the Moment</title>

	<!-- Latest compiled and minified CSS // BOOTSTRAP -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

	<!-- links to style our style sheets -->
	<link rel="stylesheet" type="text/css" href="css/reset.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">

	<!-- Firebase Reference -->
	<script src="https://cdn.firebase.com/js/client/2.4.1/firebase.js"></script>

	<!-- Latest compiled and minified CSS & JS -->
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>

	<!-- Facebook source link -->
  <script id="facebook-jssdk" src="https://connect.facebook.net/en_US/all.js"></script>

</head>
<body>
<body>
<!--         this is a test for bandsintown API using jsonP. -->
        <script src='https://code.jquery.com/jquery-2.1.3.min.js'></script>
        <script type="text/javascript">

        var bandNames = []
        var venueLatLon = []
        var venueNames = []

        var bitResponse = ''

        $.ajax({
            url: "https://api.bandsintown.com/artists/metallica/events/recommended?location=new+york,NY&radius=10&app_id=RUCB&api_version=2.0&format=json",

            jsonp: "callback",

            dataType: "jsonp",

            data: {
                q: "name",
                format: "json"
            },

                success: function( response ) {
                console.log(response); 
                bitResponse = response;
            }

        });

              function addToArray(){  
                for(var i = 0; i < bitResponse.length; i++){
                    // pushes the name and lat long of the venues into an array stored in a global variable
                   venueNames.push(bitResponse[i].venue.name);
                   venueLatLon.push("lat:"+bitResponse[i].venue.latitude + " lon:" + bitResponse[i].venue.longitude);
                   // second for loop for the artist information
                   for(var j = 0; j < bitResponse[i].artists.length; j++ ){
                    // midstep = bitResponse[i].artists[j];
                   bandNames.push(bitResponse[i].artists[j].name);
                   };
                };
              };


       //      trying to make this function run anonymously on document.done
       // // $(document).readyaddToArray();

        // http://api.bandsintown.com/artists/Lil%20Wayne?format=json&artist_id=fbid_6885814958&api_version=2.0&app_id=YOUR_APP_ID
        </script>

<!-- FACEBOOK SCRIPT - needs to be in the HTML and not the javascript DON'T EDIT-->
<div id="fb-root"></div>
  <script>
  FB.init({
    appId      : '1729912430587543',
    cookie     : true,  // enable cookies to allow the server to access 
                        // the session
    xfbml      : true,  // parse social plugins on this page
    version    : 'v2.5' // use graph api version 2.5
  });
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>

<!-- REST OF HTML -->
  	<div class="jumbotron">
  		<div class="container">
  			<h1 class="text-center">Spur of the Moment</h1>
  			<p class="text-center">paragraph with app info </p>
  		</div>
  	</div>

  	<div class="container">
  		<div class="col-md-12">
  			<h1 class="text-center">
  			</h1>
  			<p class="text-center"> information about app</p>
      </div>
      <div class="col-md-12 text-center">

<div class="container">
  <h1>Band Search</h1>

  <div id="bandView">
  </div>
<form id="band-form">
    <label for="band-input">Check out a band near you</label>
    <input type="text" id="band-input"><br>
    <input id="addBand" type="submit" value="Search for a Band Bro">
  </form>

<script type="text/javascript">
  var bands = ['Metallica', 'Iron Maiden', 'Eric Clapton', 'Bruce Springstein'];

consol.log(#addband);
  function renderButtons(){ 
    $('#bandView').empty(); 

    for (var i = 0; i < bands.length; i++){
        var a = $('<button>')
        a.addClass('bands');
        a.attr('band-name', bands[i]);
        a.text(bands[i]);
        $('#bandView').append(a);
    }
  }

  renderButtons();

  $('#addband').on('click', function(){

    var band = $('#band-input').val().trim();

    bands.push(band);
    
    renderButtons();

    return false;
  });

  $(document).on('click', '.band', function(){
    var band = $(this).attr('data-name');
    var queryURL = "https://api.bandsintown.com/artists/" + band + "events/recommended?location=" + "new+york,NY" + "&radius=10&app_id=RUCB&api_version=2.0&format=json";

    $.ajax({url: queryURL, method: 'GET'}).done(function(response) {
      var bandDiv = $('<div class="bandDiv">'); 

      var pOne = $('<p>').text( "Name: " + response.name);
      bandDiv.append(pOne);

      var pTwo = $('<p>').text( "Genre: " + response.genre);
      bandDiv.append(pTwo);

      var pThree = $('<p>').text( "Venue: " + response.venue);
      bandDiv.append(pThree);

      //Threw this if statement around the image to prevent the image from showing up if it comes back as 'N/A' from the server
      if (response.Poster != 'N/A'){ 
        var image = $('<img>').attr("src", response.Poster);
        // bandDiv.append(image);
      }

      $('#bandView').prepend(bandDiv);

    }); 
  });
</script>

        <div class="fb-login-button" data-max-rows="1" data-size="xlarge" data-show-faces="true" data-auto-logout-link="true"></div>
      </div>
      <button type="button" class="btn btn-primary" id="clickButton">Click me</button>
  	<div class="container">
    	<div id="googleMap"></div>
    </div>
	<footer class="container-fluid text-center">
	  <a href="#myPage" title="To Top">
	    <span class="glyphicon glyphicon-music"></span>
	  </a>
	  <p>Spur of the Moment</p> 
	</footer>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCaNIL3WrVXoIxK_jN1LoFluEYKKY8-qzw&signed_in=true&callback=initMap" async defer></script>
<script src="javascript/app.js"></script>

</body>
</html>